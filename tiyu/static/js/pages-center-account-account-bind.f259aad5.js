(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-center-account-account-bind"],{"1b38":function(e,t,i){"use strict";i.r(t);var n=i("b4c4"),a=i("d17f");for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);i("a3b2");var c=i("2877"),s=Object(c["a"])(a["default"],n["a"],n["b"],!1,null,"4fac87f0",null);t["default"]=s.exports},"56b9":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"uni-page-body[data-v-4fac87f0],uni-view[data-v-4fac87f0]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.center-list[data-v-4fac87f0]{margin-bottom:0}.center-list-item[data-v-4fac87f0]{height:%?130?%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-bottom:1px solid #efefef;overflow:hidden}.list-text[data-v-4fac87f0],.navigat-arrow[data-v-4fac87f0]{height:%?130?%;width:%?200?%;line-height:%?130?%}.center-list-item:active .list-text[data-v-4fac87f0]{color:#555}.list-sub[data-v-4fac87f0]{display:block;font-size:%?25?%;line-height:%?15?%;color:#9b9b9b;padding:%?20?% 0}",""])},a3b2:function(e,t,i){"use strict";var n=i("a4c7"),a=i.n(n);a.a},a4c7:function(e,t,i){var n=i("56b9");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("725c17dc",n,!0,{sourceMap:!1,shadowMode:!1})},ac3f:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{providerList:[],userInfo:{},userId:"",relatedState:"",token:"",nickName:"",checked:""}},onNavigationBarButtonTap:function(e){0==e.index&&uni.navigateBack({delta:1})},mounted:function(){this.detail()},methods:{detail:function(){var e=this,t="";if(uni.getStorage({key:"token",success:function(e){t=e.data}}),this.token=t,""!=this.token){this.userId=uni.getStorageSync("user_Id");uni.request({url:this.$webUrl+this.$getBoundAccount,header:{"content-type":"application/x-www-form-urlencoded",token:""+this.token},data:{userId:this.userId},method:"GET",success:function(t){e.relatedState=t.data.data.relatedState,e.nickName=t.data.data.nickName,0==e.relatedState?(e.checked=!1,e.nickName="未绑定微信"):e.checked=!0,uni.getProvider({service:"oauth",success:function(t){e.providerList=t.provider.map(function(t){switch(t){case"weixin":return{channel:"微信账号",nickName:e.nickName,state:1,checked:e.checked,id:t};case"qq":return{channel:"QQ账号",nickName:"未绑定QQ",state:0,checked:!1,id:t};case"sinaweibo":return{channel:"微博账号",nickName:"未绑定微博",state:0,id:t}}})},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})}else uni.navigateTo({url:"../login/login"})},bindAccount:function(e){"weixin"==e&&(0==this.relatedState&&this.bindLogin(e),1==this.relatedState&&this.weixinLogin())},bindLogin:function(e){var t=this;uni.login({provider:e.id,success:function(i){t.login=e.id,uni.getUserInfo({provider:t.login,success:function(e){t.hasUserInfo=!0,t.userInfo=e.userInfo,t.checked=!0,t.nickName=t.userInfo.nickName,uni.setStorage({key:"weixinMsg",data:t.userInfo}),t.weixinLogin()},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})},weixinLogin:function(){var e=this;1==this.relatedState?uni.request({url:this.$webUrl+this.$updateAssociatedAccountByUserId,header:{"content-type":"application/x-www-form-urlencoded",token:""+this.token},data:{userId:this.userId,relatedState:this.relatedState},method:"POST",success:function(t){e.relatedState=0;for(var i=0;i<e.providerList.length;i++)"weixin"==e.providerList[i].id&&(e.checked=!1,e.providerList[i].nickName="未绑定微信")},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}}):uni.request({url:this.$webUrl+this.$updateAssociatedAccountByUserId,header:{"content-type":"application/x-www-form-urlencoded",token:""+this.token},data:{openid:this.userInfo.openId,avatarurl:this.userInfo.avatarUrl,city:this.userInfo.city,province:this.userInfo.province,country:this.userInfo.country,gender:this.userInfo.gender,userId:this.userId,nickname:this.userInfo.nickName,unionid:this.userInfo.unionId,relatedState:this.relatedState},method:"POST",success:function(t){e.relatedState=1;for(var i=0;i<e.providerList.length;i++)"weixin"==e.providerList[i].id&&(e.checked=!0,e.providerList[i].nickName=e.userInfo.nickName)},fail:function(e){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})}}};t.default=n},b4c4:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"center-list"},e._l(e.providerList,function(t,n){return i("v-uni-view",{staticClass:"center-list-item"},[i("v-uni-view",[i("v-uni-text",{staticClass:"list-text"},[e._v(e._s(t.channel))]),i("v-uni-switch",{staticClass:"navigat-arrow",attrs:{color:"#6BD8ED",disabled:1!==t.state,checked:t.checked},on:{change:function(i){i=e.$handleEvent(i),e.bindAccount(t.id)}}})],1),i("v-uni-text",{staticClass:"list-sub"},[e._v(e._s(t.nickName))])],1)}),1)},a=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return a})},d17f:function(e,t,i){"use strict";i.r(t);var n=i("ac3f"),a=i.n(n);for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);t["default"]=a.a}}]);