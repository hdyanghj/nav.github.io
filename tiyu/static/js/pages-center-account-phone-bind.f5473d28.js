(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-center-account-phone-bind"],{"002c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{title:String,phones:String,userid:String,token:String,yangzhengma:Boolean},data:function(){return{loading:!1,status:!1,num:60,huoqucode:"获取验证码",phoneCode:"",disaBled:!0,phoneTishi:!1,textTishi:!0,codeList:{phone:"1111111111",code:"222222"},steptext:""}},mounted:function(){this.aCode()},methods:{aCode:function(){var t=this;0==t.yangzhengma&&(t.steptext="下一步"),1==t.yangzhengma&&(t.steptext="完成")},makeRequest:function(){var t=this;this.loading=!0,uni.request({url:this.$msgUrl+this.$sendMessage,header:{"content-type":"application/x-www-form-urlencoded"},data:{mobile:this.phones},method:"POST",success:function(e){return 0==e.data.code?(t.obtainCode(),void uni.showToast({icon:"none",duration:3e3,title:"发送成功"})):100003004==e.data.code?void uni.showToast({icon:"none",duration:3e3,title:"短信发送次数超限"}):void uni.showToast({icon:"none",duration:3e3,title:"发送失败"})},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})},complete:function(){t.loading=!1}})},codenum:function(t){var e=t.detail.value.length;this.phoneCode=t.detail.value,this.disaBled=4!=e},nextBtn:function(){var t=this;uni.request({url:this.$webUrl+this.$SmsCaptcha,header:{"content-type":"application/x-www-form-urlencoded",token:this.token},data:{mobile:this.phones,captcha:this.phoneCode},method:"PUT",success:function(e){if(0==e.data.code)0==t.yangzhengma&&t.$emit("codeClick","oldphone"),1==t.yangzhengma&&uni.request({url:t.$webUrl+t.$updateMobile,header:{"content-type":"application/x-www-form-urlencoded",token:t.token},data:{userId:t.userid,newMobile:t.phones},method:"PUT",success:function(e){if(0==e.data.code)t.$emit("codeClick","change");else{if(100005005==e.data.code)return void uni.showToast({icon:"none",duration:3e3,title:"验证码已过期"});10002==e.data.code&&t.$emit("codeClick","renew")}},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}});else{if(100005002!=e.data.code)return void uni.showToast({icon:"none",duration:3e3,title:"验证码错误"});uni.showToast({icon:"none",duration:3e3,title:"登录过期，请重新登录"})}},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})},complete:function(){t.loading=!1}})},obtainCode:function(){var t=this;this.status||(this.phoneTishi=!0,this.textTishi=!1,this.status=!0,this.loadingTiming(),this.timer=setInterval(function(){0===t.num?(t.timer&&t.clearTimer(),t.reset()):t.loadingTiming()},1e3))},reset:function(){this.num=60,this.status=!1,this.disabled="",this.huoqucode="重新获取"},loadingTiming:function(){this.num-=1,this.huoqucode="获取中("+this.num+")"},clearTimer:function(){clearInterval(this.timer),this.timer=null}}};e.default=i},"0925":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{newtitle:String,subtitle:String,phones:String,userid:String,token:String},data:function(){return{mobile:"",areaCode:"86",disaBled:!0,providerList:[]}},methods:{search:function(t){var e=t.detail.value.length;this.mobile=t.detail.value,this.disaBled=11!=e},obtainCode:function(t){var e=this,n=/^1[3456789]\d{9}$/;n.test(e.mobile)?(uni.setStorage({key:"AreaCode",data:{phoneNumber:e.mobile,code:e.areaCode}}),e.$emit("codeClick","newphone")):uni.showToast({icon:"none",duration:3e3,title:"手机格式不正确"})}}};e.default=i},"0a94":function(t,e,n){"use strict";n.r(e);var i=n("8617"),o=n("461b");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("bd5a");var s=n("2877"),u=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"39a5a68a",null);e["default"]=u.exports},"0f54":function(t,e,n){var i=n("6f7c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("29a70572",i,!0,{sourceMap:!1,shadowMode:!1})},"107b":function(t,e,n){"use strict";var i=n("0f54"),o=n.n(i);o.a},"2f0d":function(t,e,n){"use strict";var i=n("ad46"),o=n.n(i);o.a},"324a":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"login-body"},[n("v-uni-view",{staticClass:"login-title"},[t._v(t._s(t.newtitle))]),n("v-uni-view",{staticClass:"login-mobile"},[t._v(t._s(t.subtitle))]),n("v-uni-view",{staticClass:"login-mobile-cont"},[n("v-uni-view",{staticClass:"login-mobile-input"},[n("v-uni-input",{staticClass:"login-input",attrs:{type:"number",maxlength:"11",value:t.mobile},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e=t.$handleEvent(e),t.search(e)},input:function(e){e=t.$handleEvent(e),t.search(e)}}})],1)],1),n("v-uni-view",{staticClass:"login-button"},[n("v-uni-button",{staticClass:"normalButton",attrs:{disabled:t.disaBled},on:{click:function(e){e=t.$handleEvent(e),t.obtainCode()}}},[t._v("下一步")])],1)],1)},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},"376e":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".center-list[data-v-609fe21c]{margin-bottom:0}",""])},4083:function(t,e,n){var i=n("466c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("869e7664",i,!0,{sourceMap:!1,shadowMode:!1})},"461b":function(t,e,n){"use strict";n.r(e);var i=n("002c"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"466c":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".body-show[data-v-39a5a68a]{width:%?660?%;margin:0 auto}.login-title[data-v-39a5a68a]{margin:0}.phone[data-v-39a5a68a]{font-size:%?34?%;color:#525252}.login-password[data-v-39a5a68a]{font-size:%?34?%;color:#4a4a4a}.login-mobile-cont[data-v-39a5a68a]{width:100%;height:%?54?%;padding:%?40?% 0 %?10?%;border-bottom:1px solid #efefef;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}.login-mobile-input[data-v-39a5a68a]{padding-left:%?20?%}.login-password[data-v-39a5a68a]{padding-top:%?50?%}.login-xianshi[data-v-39a5a68a]{height:%?54?%;line-height:%?54?%;position:absolute;right:%?0?%;top:%?40?%;font-size:%?26?%}.huoqu-button[data-v-39a5a68a]{font-size:%?26?%;color:#03b2ca;background:none}.huoqu-button.button-hover[data-v-39a5a68a]{background:none}.huoqu-button[data-v-39a5a68a]:after{border:0}.bind-tishi[data-v-39a5a68a],.login-tishi[data-v-39a5a68a]{padding:%?40?% 0;font-size:%?26?%;color:#ccc}.huoqu-button[disabled][data-v-39a5a68a]:not([type]),.huoqu-button[disabled][type=default][data-v-39a5a68a]{background:none;font-size:%?26?%;color:#9b9b9b}",""])},"6a31":function(t,e,n){"use strict";n.r(e);var i=n("0925"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"6f7c":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".login-body[data-v-ce2d1240]{width:%?660?%;margin:0 auto;position:relative}.login-title[data-v-ce2d1240]{margin:0}.login-mobile[data-v-ce2d1240],.login-password[data-v-ce2d1240]{font-size:%?34?%;color:#4a4a4a}.login-mobile-cont[data-v-ce2d1240]{width:100%;height:%?54?%;padding:%?40?% 0 %?10?%;border-bottom:1px solid #efefef;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}.login-gsd[data-v-ce2d1240]{border:1px solid #ccc;padding:%?5?% %?20?%;font-size:%?30?%}.login-mobile-input[data-v-ce2d1240]{padding-left:%?20?%}.login-input[data-v-ce2d1240]{width:%?540?%;font-size:%?32?%;line-height:%?54?%;border:none;outline:none}.login-password[data-v-ce2d1240]{padding-top:%?50?%}.login-xianshi[data-v-ce2d1240]{height:%?54?%;line-height:%?54?%;position:absolute;right:%?0?%;top:%?40?%;font-size:%?26?%;color:#03b2ca}.login-button[data-v-ce2d1240]{padding-top:%?100?%}.login-code[data-v-ce2d1240]{padding-top:%?40?%;font-size:%?26?%;color:#03b2ca;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.login-code-tishi[data-v-ce2d1240]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:left;color:#000}.login-code-pass[data-v-ce2d1240]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:right}",""])},8617:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"body-show"},[n("v-uni-view",{staticClass:"login-title"},[t._v(t._s(t.title))]),n("v-uni-view",{staticClass:"phone"},[t._v(t._s(t.phones))]),n("v-uni-view",{staticClass:"login-mobile-cont"},[n("v-uni-view",{staticClass:"login-mobile-input"},[n("v-uni-input",{attrs:{type:"number",maxlength:"4"},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e=t.$handleEvent(e),t.codenum(e)},input:function(e){e=t.$handleEvent(e),t.codenum(e)}}})],1),n("v-uni-view",{staticClass:"login-xianshi"},[n("v-uni-button",{staticClass:"huoqu-button",attrs:{disabled:t.status,loading:t.loading},on:{click:function(e){e=t.$handleEvent(e),t.makeRequest(e)}}},[t._v(t._s(t.huoqucode))])],1)],1),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.phoneTishi,expression:"phoneTishi"}],staticClass:"login-tishi"},[t._v("已经向"+t._s(t.phones)+"发送了一个验证码")]),n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.textTishi,expression:"textTishi"}],staticClass:"bind-tishi"},[t._v("点击获取验证码进行手机验证后绑定新号码。")]),n("v-uni-view",{staticClass:"login-button"},[n("v-uni-button",{staticClass:"normalButton",attrs:{disabled:t.disaBled},on:{click:function(e){e=t.$handleEvent(e),t.nextBtn()}}},[t._v(t._s(t.steptext))])],1)],1)},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})},ad46:function(t,e,n){var i=n("376e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("037bfa07",i,!0,{sourceMap:!1,shadowMode:!1})},bd5a:function(t,e,n){"use strict";var i=n("4083"),o=n.n(i);o.a},d56b:function(t,e,n){"use strict";n.r(e);var i=n("ff48"),o=n("d5ec");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("2f0d");var s=n("2877"),u=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"609fe21c",null);e["default"]=u.exports},d5ec:function(t,e,n){"use strict";n.r(e);var i=n("f0cc"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},ddd4:function(t,e,n){"use strict";n.r(e);var i=n("324a"),o=n("6a31");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("107b");var s=n("2877"),u=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"ce2d1240",null);e["default"]=u.exports},f0cc:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("0a94")),o=a(n("ddd4"));function a(t){return t&&t.__esModule?t:{default:t}}var s={onLoad:function(){var t,e,n;(uni.getStorage({key:"user_Info",success:function(e){t=e.data}}),this.phones=t.mobile,uni.getStorage({key:"token",success:function(t){e=t.data}}),this.token=e,""!=this.token)?(uni.getStorage({key:"user_Id",success:function(t){n=t.data}}),this.userid=n):uni.navigateTo({url:"../login/login"})},data:function(){return{title:"更改绑定手机号",phones:"",userid:"",yangzhengma:!1,token:"",phonecode:!0,phonenumber:!1,newtitle:"绑定新手机号",subtitle:"输入新手机号"}},components:{PHONEcode:i.default,PHONEnumber:o.default},onNavigationBarButtonTap:function(t){0==t.index&&uni.navigateBack({delta:1})},methods:{codeClick:function(t){var e,n=this;(console.log(t),"oldphone"==t&&(this.phonecode=!1,this.phonenumber=!0),"newphone"==t)&&(this.reload(),this.phonenumber=!1,this.yangzhengma=!0,this.title="获取新手机号验证码",uni.getStorage({key:"AreaCode",success:function(t){e=t.data}}),this.phones=e.phoneNumber);"change"==t&&(this.phonecode=!0,this.phonenumber=!1,this.title="更改绑定手机号",uni.showToast({icon:"none",duration:3e3,title:"修改成功"}),uni.request({url:this.$webUrl+this.$modifyMsg,header:{"content-type":"application/x-www-form-urlencoded",token:this.token},data:{userId:this.userid},method:"GET",success:function(t){var e=t.data.data;uni.setStorage({key:"user_Info",data:{username:e.username,headSculpture:e.headSculpture,remarks:e.remarks,gender:e.gender,birthday:e.birthday,email:e.email,mobile:e.mobile}}),n.phones=e.mobile},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}}),this.reload()),"renew"==t&&(this.phonecode=!1,this.phonenumber=!0,uni.showToast({icon:"none",duration:3e3,title:"手机号已绑定其他账号"}))},reload:function(){var t=this;this.phonecode=!1,this.$nextTick(function(){return t.phonecode=!0})}}};e.default=s},ff48:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"center-list"},[t.phonecode?n("PHONEcode",{attrs:{phones:t.phones,userid:t.userid,title:t.title,token:t.token,yangzhengma:t.yangzhengma},on:{codeClick:function(e){e=t.$handleEvent(e),t.codeClick(e)}}}):t._e(),t.phonenumber?n("PHONEnumber",{attrs:{phones:t.phones,userid:t.userid,token:t.token,newtitle:t.newtitle,subtitle:t.subtitle},on:{codeClick:function(e){e=t.$handleEvent(e),t.codeClick(e)}}}):t._e()],1)},o=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o})}}]);