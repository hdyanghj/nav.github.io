(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-video-order-form"],{3625:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"wrap"},[i("v-uni-view",{staticClass:"first-title"},[e._v("订单")]),i("v-uni-view",{staticClass:"order-list"},[i("v-uni-view",[i("v-uni-view",{staticClass:"card"},[i("v-uni-view",{staticClass:"order-img"},[i("v-uni-image",{attrs:{src:e.img}})],1),i("v-uni-view",{staticClass:"card-right"},[i("v-uni-view",{staticClass:"order-flex"},[i("v-uni-view",{staticClass:"order-titlle"},[e._v(e._s(e.title))]),i("v-uni-view",{staticClass:"order-num"},[e._v(e._s(e.num))])],1),i("v-uni-view",{staticClass:"order-id"},[e._v("订单编号："+e._s(e.orderId))]),i("v-uni-view",{staticClass:"order-price"},[e._v("￥"+e._s(e.price))]),2==e.type?i("v-uni-view",{staticClass:"operate-num"},[i("v-uni-text",{on:{click:function(t){t=e.$handleEvent(t),e.numSubstract(t)}}},[e._v("-")]),i("v-uni-input",{attrs:{type:"text",disabled:"true"},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}}),i("v-uni-text",{on:{click:function(t){t=e.$handleEvent(t),e.numAdd(t)}}},[e._v("+")])],1):e._e()],1)],1)],1)],1),i("v-uni-view",{staticClass:"bottom-tab"},[i("v-uni-view",{staticClass:"total-price"},[e._v("总价：￥"+e._s(e.totalPrice))]),i("v-uni-view",{staticClass:"btn",on:{click:function(t){t=e.$handleEvent(t),e.requestPayment(t)}}},[e._v("微信支付")])],1)],1)},r=[];i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r})},"4f5e":function(e,t,i){"use strict";i.r(t);var n=i("3625"),r=i("6f56");for(var a in r)"default"!==a&&function(e){i.d(t,e,function(){return r[e]})}(a);i("f2a0");var o=i("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"048745de",null);t["default"]=s.exports},"6df6":function(e,t,i){var n=i("e5db");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=i("4f06").default;r("5b651550",n,!0,{sourceMap:!1,shadowMode:!1})},"6f56":function(e,t,i){"use strict";i.r(t);var n=i("af3f"),r=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t["default"]=r.a},a34a:function(e,t,i){e.exports=i("bbdd")},af3f:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,i,n,r,a,o){try{var s=e[a](o),d=s.value}catch(u){return void i(u)}s.done?t(d):Promise.resolve(d).then(n,r)}function o(e){return function(){var t=this,i=arguments;return new Promise(function(n,r){var o=e.apply(t,i);function s(e){a(o,n,r,s,d,"next",e)}function d(e){a(o,n,r,s,d,"throw",e)}s(void 0)})}}var s={data:function(){return{totalPrice:0,num:1,img:"",title:"",date:"",price:0,type:"",orderId:"",fixedNum:0}},onLoad:function(e){this.img=e.img,this.title=e.name,this.date="00000",this.price=e.price,this.totalPrice=e.price,this.type=e.type,this.orderId=e.orderId,this.orderNum=e.orderNum,this.fixedNum=this.price.slice(this.price.indexOf(".")).length-1},onNavigationBarButtonTap:function(e){1==e.index&&uni.navigateBack({delta:1})},methods:{numSubstract:function(){this.num<=1||(this.num--,-1!=this.price.indexOf(".")?this.totalPrice=(parseFloat(this.totalPrice)-parseFloat(this.price)).toFixed(this.fixedNum):this.totalPrice=parseInt(this.totalPrice)-parseInt(this.price))},numAdd:function(){this.num++,-1!=this.price.indexOf(".")?this.totalPrice=(parseFloat(this.totalPrice)+parseFloat(this.price)).toFixed(this.fixedNum):this.totalPrice=parseInt(this.totalPrice)+parseInt(this.price)},requestPayment:function(){var e=o(n.default.mark(function e(){var t,i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="wxpay",e.next=3,this.getOrderInfo(t);case 3:if(i=e.sent,console.log("orderinfo-----------------------------------------------------------------------------"),console.log(JSON.stringify(i)),console.log("得到订单信息",i),200===i.statusCode){e.next=11;break}return console.log("获得订单信息失败",i),uni.showModal({content:"获得订单信息失败",showCancel:!1}),e.abrupt("return");case 11:uni.requestPayment({provider:t,orderInfo:i.data,success:function(e){console.log("success",e),uni.showToast({icon:"none",title:"支付成功!"}),setTimeout(function(){uni.redirectTo({url:"../center/order-list"})},500)},fail:function(e){setTimeout(function(){uni.redirectTo({url:"../center/order-list"})},500)}});case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getOrderInfo:function(e){var t={orderFee:this.totalPrice,body:"课程",orderId:this.orderId,orderNum:this.orderNum},i=this.$webUrl+"unifideOrderResult/v1.0/getUnifideOrderResult";return new Promise(function(e){uni.request({url:i,data:t,success:function(t){e(t)},fail:function(t){e(t)}})})}}};t.default=s},bbdd:function(e,t,i){var n=function(){return this||"object"===typeof self&&self}()||Function("return this")(),r=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=r&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=i("96cf"),r)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(o){n.regeneratorRuntime=void 0}},e5db:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".order-list[data-v-048745de]{margin-top:20px;margin-bottom:%?146?%}.card[data-v-048745de]{background:#fff;-webkit-box-shadow:%?0?% %?2?% %?16?% %?0?% rgba(0,0,0,.15);box-shadow:%?0?% %?2?% %?16?% %?0?% rgba(0,0,0,.15);border-radius:%?16?%;padding:%?24?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:%?20?%}.card-right[data-v-048745de]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.card-right uni-view[data-v-048745de]{margin-bottom:%?10?%}.order-img[data-v-048745de]{width:%?160?%;height:%?160?%;padding-right:%?32?%}.order-img uni-image[data-v-048745de]{width:100%;height:100%;border-radius:%?8?%}.order-flex[data-v-048745de]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;font-size:%?32?%;color:#4a4a4a}.order-date[data-v-048745de]{font-size:%?24?%;color:#000;line-height:%?34?%}.order-id[data-v-048745de]{font-size:%?24?%;color:#000;line-height:%?34?%}.order-price[data-v-048745de]{margin-top:%?10?%;font-size:%?36?%;line-height:%?46?%;color:#fe5960}.operate-num[data-v-048745de]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;color:#999}.operate-num uni-input[data-v-048745de]{width:%?78?%;height:%?52?%;background:#f6f6f6;font-size:%?24?%;line-height:%?34?%;text-align:center}.operate-num uni-text[data-v-048745de]{padding:%?0?% %?16?%;font-size:%?50?%;line-height:%?50?%}.bottom-tab[data-v-048745de]{position:fixed;left:0;bottom:0;right:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;background-color:#fff;-webkit-box-shadow:0 0 %?8?% #f0f2f6;box-shadow:0 0 %?8?% #f0f2f6;font-size:%?32?%;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.bottom-tab .btn[data-v-048745de]{width:%?400?%;height:%?106?%;line-height:%?106?%;text-align:center;background-color:#fe5960;color:#fff}.total-price[data-v-048745de]{line-height:%?100?%;padding-left:%?44?%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}",""])},f2a0:function(e,t,i){"use strict";var n=i("6df6"),r=i.n(n);r.a}}]);