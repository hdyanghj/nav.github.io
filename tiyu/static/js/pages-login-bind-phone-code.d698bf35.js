(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-bind-phone-code"],{"221b":function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,".login-body[data-v-cac170ac]{width:%?660?%;margin:0 auto}.login-title[data-v-cac170ac]{margin:0}.login-password[data-v-cac170ac]{font-size:%?34?%;color:#4a4a4a}.login-mobile-cont[data-v-cac170ac]{width:100%;height:%?54?%;padding:%?40?% 0 %?10?%;border-bottom:1px solid #efefef;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}.login-mobile-input[data-v-cac170ac]{padding-left:%?20?%}.login-password[data-v-cac170ac]{padding-top:%?50?%}.login-xianshi[data-v-cac170ac]{height:%?54?%;line-height:%?54?%;position:absolute;right:%?0?%;top:%?40?%;font-size:%?26?%}.huoqu-button[data-v-cac170ac]{font-size:%?26?%;color:#03b2ca;background:none}.huoqu-button.button-hover[data-v-cac170ac]{background:none}.huoqu-button[data-v-cac170ac]:after{border:0}.login-tishi[data-v-cac170ac]{padding-top:%?40?%;font-size:%?26?%;color:#ccc}.huoqu-button[disabled][data-v-cac170ac]:not([type]),.huoqu-button[disabled][type=default][data-v-cac170ac]{background:none;font-size:%?26?%;color:#9b9b9b}",""])},"269a":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={data:function(){return{loading:!1,status:!1,num:60,huoqucode:"获取验证码",mobilenumber:"",phonenumber:"",userInfo:{}}},mounted:function(){this.aCode()},methods:{aCode:function(){var t="";uni.getStorage({key:"AreaCode",success:function(n){n.data.code,t=n.data.phoneNumber}}),this.mobilenumber=t.substring(0,3)+"****"+t.substring(7,11),this.phonenumber=t;var n={};uni.getStorage({key:"weixinMsg",success:function(t){n=t.data}}),this.userInfo=n},makeRequest:function(){var t=this;this.loading=!0,uni.request({url:this.$msgUrl+this.$sendMessage,header:{"content-type":"application/x-www-form-urlencoded"},data:{mobile:this.phonenumber},method:"POST",success:function(n){return 0==n.data.code?(t.obtainCode(),void uni.showToast({icon:"none",duration:3e3,title:"发送成功"})):100003004==n.data.code?void uni.showToast({icon:"none",duration:3e3,title:"短信发送次数超限"}):void uni.showToast({icon:"none",duration:3e3,title:"发送失败"})},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"发送失败"})},complete:function(){t.loading=!1}})},bindMsg:function(){uni.request({url:this.$webUrl+this.$save,data:{openid:this.userInfo.openId,avatarurl:this.userInfo.avatarUrl,city:this.userInfo.city,province:this.userInfo.province,country:this.userInfo.country,gender:this.userInfo.gender,mobile:this.phonenumber,nickname:this.userInfo.nickName,unionid:this.userInfo.unionId},method:"POST",success:function(t){var n=t.data.data,e=n.user;console.log(JSON.stringify(e)),uni.setStorage({key:"user_Info",data:{username:e.username,headSculpture:e.headSculpture,remarks:e.remarks,gender:e.gender,birthday:e.birthday,email:e.email,mobile:e.mobile}}),uni.setStorage({key:"user_Id",data:e.id}),uni.setStorage({key:"token",data:n.token}),uni.switchTab({url:"../center/center"})},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})},codenum:function(t){var n=this,e=t.detail.value.length,i=t.detail.value;4==e&&uni.request({url:this.$webUrl+this.$getMessageValidate,header:{"content-type":"application/x-www-form-urlencoded"},data:{mobile:this.phonenumber,code:i},method:"POST",success:function(t){if(0==t.data.data.code)return uni.showToast({icon:"none",duration:2e3,title:"该手机号已绑定微信。"}),void setTimeout(function(){uni.navigateBack({delta:1})},2e3);1==t.data.data.code&&n.bindMsg(),2!=t.data.data.code||uni.showToast({icon:"none",duration:3e3,title:"验证码错误"})},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})},complete:function(){n.loading=!1}})},obtainCode:function(){var t=this;this.status||(this.status=!0,this.loadingTiming(),this.timer=setInterval(function(){0===t.num?(t.timer&&t.clearTimer(),t.reset()):t.loadingTiming()},1e3))},reset:function(){this.num=60,this.status=!1,this.disabled="",this.huoqucode="重新获取"},loadingTiming:function(){this.num-=1,this.huoqucode="获取中("+this.num+")"},clearTimer:function(){clearInterval(this.timer),this.timer=null}}};n.default=i},"281b":function(t,n,e){"use strict";e.r(n);var i=e("269a"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);n["default"]=a.a},"2a67":function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"login-body"},[e("v-uni-view",{staticClass:"login-title"},[t._v("请输入验证码")]),e("v-uni-view",{staticClass:"login-mobile-cont"},[e("v-uni-view",{staticClass:"login-mobile-input"},[e("v-uni-input",{attrs:{type:"number",maxlength:"4"},on:{keyup:function(n){if(!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter"))return null;n=t.$handleEvent(n),t.codenum(n)},input:function(n){n=t.$handleEvent(n),t.codenum(n)}}})],1),e("v-uni-view",{staticClass:"login-xianshi"},[e("v-uni-button",{staticClass:"huoqu-button",attrs:{disabled:t.status,loading:t.loading},on:{click:function(n){n=t.$handleEvent(n),t.makeRequest(n)}}},[t._v(t._s(t.huoqucode))])],1)],1),e("v-uni-view",{staticClass:"login-tishi"},[t._v("已经向"+t._s(t.mobilenumber)+"发送了一个验证码")])],1)},a=[];e.d(n,"a",function(){return i}),e.d(n,"b",function(){return a})},b841:function(t,n,e){"use strict";var i=e("f59d"),a=e.n(i);a.a},d60b:function(t,n,e){"use strict";e.r(n);var i=e("2a67"),a=e("281b");for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);e("b841");var u=e("2877"),s=Object(u["a"])(a["default"],i["a"],i["b"],!1,null,"cac170ac",null);n["default"]=s.exports},f59d:function(t,n,e){var i=e("221b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("40c7d042",i,!0,{sourceMap:!1,shadowMode:!1})}}]);