(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"124a":function(t,e,i){"use strict";i.r(e);var n=i("18ad"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"16ba":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"login-body",style:{height:t.winHeight+"px"}},[i("v-uni-view",{staticClass:"login-title"},[t._v("登录")]),i("v-uni-view",{staticClass:"login-mobile"},[t._v("手机号")]),i("v-uni-view",{staticClass:"login-mobile-cont",class:t.phoneerrormsg},[i("v-uni-view",{staticClass:"login-gsd",on:{click:function(e){e=t.$handleEvent(e),t.areaButton(e)}}},[t._v("+"+t._s(t.areaCode))]),i("v-uni-view",{staticClass:"login-mobile-input"},[i("v-uni-input",{staticClass:"login-input",attrs:{type:"number",maxlength:"11",value:t.mobile},on:{focus:function(e){e=t.$handleEvent(e),t.phoneju(e)},keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e=t.$handleEvent(e),t.search(e)},input:function(e){e=t.$handleEvent(e),t.search(e)}}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.phonetips,expression:"phonetips"}],staticClass:"tips"},[t._v(t._s(t.tipstext))])],1),i("v-uni-view",{staticClass:"login-password"},[t._v("密码")]),i("v-uni-view",{staticClass:"login-mobile-cont",class:t.passerrormsg},[i("v-uni-view",{staticClass:"login-mobile-input"},[i("v-uni-input",{staticClass:"login-input",attrs:{type:t.passswitch,value:t.password},on:{focus:function(e){e=t.$handleEvent(e),t.passju(e)},blur:function(e){e=t.$handleEvent(e),t.passdiu(e)},keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e=t.$handleEvent(e),t.passWord(e)},input:function(e){e=t.$handleEvent(e),t.passWord(e)}}})],1),i("v-uni-view",{staticClass:"login-xianshi",on:{click:function(e){e=t.$handleEvent(e),t.passSwitch(t.uniswitch)}}},[t._v(t._s(t.uniswitchtext))]),i("v-uni-view",{staticClass:"tips"},[t._v(t._s(t.passext))])],1),i("v-uni-view",{staticClass:"login-button"},[i("v-uni-button",{staticClass:"normalButton",attrs:{disabled:t.disaBled},on:{click:function(e){e=t.$handleEvent(e),t.obtainCode()}}},[t._v("登录")])],1),i("v-uni-view",{staticClass:"login-code"},[i("v-uni-view",{staticClass:"login-code-tishi",on:{click:function(e){e=t.$handleEvent(e),t.forgetpass(e)}}},[t._v("忘记密码?")]),i("v-uni-view",{staticClass:"login-code-pass",on:{click:function(e){e=t.$handleEvent(e),t.phoneLogin(e)}}},[t._v("免密码登录/注册账号")])],1),i("v-uni-view",{staticClass:"Tripartite"},[i("v-uni-view",{staticClass:"pact-footer"},[i("v-uni-view",{staticClass:"pact-footer-cont"},[t._v("登录表明已阅读并接受"),i("v-uni-text",{staticClass:"pact-footer-text",on:{click:function(e){e=t.$handleEvent(e),t.termsb(e)}}},[t._v("用户协议")]),t._v("和"),i("v-uni-text",{staticClass:"pact-footer-text",on:{click:function(e){e=t.$handleEvent(e),t.policy(e)}}},[t._v("隐私政策")])],1)],1)],1),t.weChat?i("WeChat",{attrs:{platform:t.platform},on:{codeClick:function(e){e=t.$handleEvent(e),t.codeClick(e)}}}):t._e()],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"18ad":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("7234"));function o(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{areaCode:"86",mobile:"",password:"",passswitch:"password",uniswitch:!0,uniswitchtext:"显示",winHeight:0,disaBled:!0,phoneerrormsg:"",passerrormsg:"",tipstext:"请输入您的手机号",passext:"密码必须为6-18位字母、数字。",phonetips:!1,providerList:[],platform:"",weChat:!1}},components:{WeChat:n.default},onLoad:function(){var t=this;uni.getProvider({service:"oauth",success:function(e){t.providerList=e.provider.map(function(t){switch(t){case"weixin":return{name:"../../static/login-weixin.png",id:t,show:!0};case"qq":return{name:"../../static/login-qq.png",id:t,show:!1};case"sinaweibo":return{name:"../../static/login-weibo.png",id:t,show:!1}}})},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})},mounted:function(){this.winHeight=uni.getSystemInfoSync().windowHeight,this.aCode()},methods:{aCode:function(){var t=this,e="",i="";uni.getStorage({key:"AreaCode",success:function(t){console.log(t.data),e=t.data.code,i=t.data.phoneNumber}}),""!=e&&(t.areaCode=e,t.mobile=i)},bindLogin:function(t){console.log(t.id),this.platform=t.id,this.weChat=!0},codeClick:function(t){this.weChat=t},passSwitch:function(t){1==t&&(this.passswitch="text",this.uniswitchtext="隐藏",this.uniswitch=!1),0==t&&(this.passswitch="password",this.uniswitchtext="显示",this.uniswitch=!0)},areaButton:function(){uni.navigateTo({url:"../phones/phones"})},forgetpass:function(){uni.navigateTo({url:"phonelogin"})},phoneLogin:function(){uni.navigateTo({url:"phonelogin"})},termsb:function(){uni.navigateTo({url:"/pages/center/account/user-agreement"})},policy:function(){uni.navigateTo({url:"/pages/center/account/privacy-protocol"})},search:function(t){var e=this;e.mobile=t.detail.value,uni.setStorage({key:"AreaCode",data:{phoneNumber:e.mobile,code:e.areaCode}}),this.verification()},passWord:function(t){var e=this;e.password=t.detail.value,uni.setStorage({key:"AreaCode",data:{phoneNumber:e.mobile,code:e.areaCode}}),this.verification()},verification:function(){var t=this;""!=t.mobile&&""!=t.password?t.disaBled=!1:t.disaBled=!0},phoneju:function(){var t=this;t.phoneerrormsg="",t.phonetips=!1},passju:function(){var t=this;if(t.passerrormsg="",t.passext="密码必须为6-18位字母、数字。",""==t.mobile)return t.phoneerrormsg="errorred",void(t.phonetips=!0)},passdiu:function(){var t=this,e=/^[a-zA-Z]\w{5,17}$/;return""==t.password?(t.passerrormsg="errorred",void(t.passext="密码不能为空。")):e.test(t.password)?void 0:(t.passerrormsg="errorred",void(t.passext="密码必须为6-18位字母、数字。"))},obtainCode:function(){var t=this,e=/^1[3456789]\d{9}$/,i=/^[a-zA-Z]\w{5,17}$/;if(""!=t.mobile)if(e.test(t.mobile))if(""!=t.password)if(i.test(t.password)){var n=t.$md5(t.password);uni.request({url:this.$webUrl+this.$passwordLogin,header:{"content-type":"application/x-www-form-urlencoded"},data:{mobile:t.mobile,password:n},method:"POST",success:function(t){var e=t.data.data;10004!=t.data.code?100005004!=t.data.code?(uni.setStorage({key:"user_Info",data:{username:e.username,headSculpture:e.headSculpture,remarks:e.remarks,gender:e.gender,birthday:e.birthday,email:e.email,mobile:e.mobile}}),uni.setStorage({key:"user_Id",data:e.id}),uni.setStorage({key:"token",data:t.data.token}),0==t.data.code&&uni.reLaunch({url:"../index/index"}),2==t.data.code&&(uni.setStorage({key:"user_Info",data:{mobile:e.mobile}}),uni.setStorage({key:"user_Id",data:e.id}),uni.setStorage({key:"token",data:t.data.token}),uni.reLaunch({url:"../login/set"}))):uni.showToast({icon:"none",duration:3e3,title:"未设置密码错误"}):uni.showToast({icon:"none",duration:3e3,title:"密码错误"})},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})}else uni.showToast({icon:"none",duration:3e3,title:"密码格式不正确"});else uni.showToast({icon:"none",duration:3e3,title:"密码不能为空"});else uni.showToast({icon:"none",duration:3e3,title:"手机格式不正确"});else uni.showToast({icon:"none",duration:3e3,title:"手机号不能为空"})}}};e.default=a},"1cc0":function(t,e,i){"use strict";i.r(e);var n=i("16ba"),o=i("124a");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("fd05");var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"2c586f82",null);e["default"]=r.exports},"22bf":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".login-body[data-v-2c586f82]{width:%?660?%;margin:0 auto;position:relative}.login-title[data-v-2c586f82]{margin:0}.login-mobile[data-v-2c586f82],.login-password[data-v-2c586f82]{font-size:%?34?%;color:#4a4a4a}.login-mobile-cont[data-v-2c586f82]{width:100%;height:%?54?%;padding:%?40?% 0 %?10?%;border-bottom:1px solid #efefef;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative}.login-gsd[data-v-2c586f82]{border:1px solid #ccc;padding:%?5?% %?20?%;font-size:%?30?%}.login-mobile-input[data-v-2c586f82]{padding-left:%?20?%}.login-input[data-v-2c586f82]{width:%?540?%;font-size:%?32?%;line-height:%?54?%;border:none;outline:none}.login-password[data-v-2c586f82]{padding-top:%?50?%}.login-xianshi[data-v-2c586f82]{height:%?54?%;line-height:%?54?%;position:absolute;right:%?0?%;top:%?40?%;font-size:%?26?%;color:#03b2ca}.login-button[data-v-2c586f82]{padding-top:%?100?%}.login-code[data-v-2c586f82]{padding-top:%?40?%;font-size:%?26?%;color:#03b2ca;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.login-code-tishi[data-v-2c586f82]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:left}.login-code-pass[data-v-2c586f82]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:right}.Tripartite-icon.button-hover[data-v-2c586f82]{background:none!important}",""])},3697:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{platform:String},data:function(){return{login:"",userInfo:{}}},onLoad:function(){var t=this;"weixin"==this.platform&&uni.login({provider:this.platform,success:function(e){t.login=t.platform,uni.getUserInfo({provider:t.login,success:function(e){t.hasUserInfo=!0,t.userInfo=e.userInfo,uni.setStorage({key:"weixinMsg",data:t.userInfo}),t.weixinLogin()},fail:function(t){var e=JSON.stringify(t);console.log(e),uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})},fail:function(e){t.$emit("codeClick",!1),uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})}})},methods:{weixinLogin:function(){var t=this;console.log(111),uni.request({url:this.$webUrl+this.$getUserInfo,header:{"content-type":"application/x-www-form-urlencoded"},data:{openId:this.userInfo.openId},method:"GET",success:function(e){var i=e.data.data;if(console.log(JSON.stringify(i)),console.log(t.userInfo.openId),0==i.code){var n=i.user;uni.setStorage({key:"user_Info",data:{username:n.username,headSculpture:n.headSculpture,remarks:n.remarks,gender:n.gender,birthday:n.birthday,email:n.email,mobile:n.mobile}}),uni.setStorage({key:"user_Id",data:n.id}),uni.setStorage({key:"token",data:i.token}),uni.switchTab({url:"../center/center"})}3==i.code&&uni.navigateTo({url:"bind-phone"})},fail:function(t){uni.showToast({icon:"none",duration:3e3,title:"网络连接失败"})},complete:function(){t.loading=!1}})}}};e.default=n},"37f1":function(t,e,i){"use strict";i.r(e);var n=i("3697"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},7234:function(t,e,i){"use strict";i.r(e);var n=i("ad4c"),o=i("37f1");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"234c88eb",null);e["default"]=r.exports},ad4c:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"})},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},d451:function(t,e,i){var n=i("22bf");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("2e3327c5",n,!0,{sourceMap:!1,shadowMode:!1})},fd05:function(t,e,i){"use strict";var n=i("d451"),o=i.n(n);o.a}}]);